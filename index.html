<!DOCTYPE html>
    <head>
        <title>News Summary Challenge</title>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script>
            $(document).ready(function() {
                var makersAPI = "http://news-summary-api.herokuapp.com/guardian?apiRequestUrl="
                setUpPage()

                function setUpPage(){
                    $.ajax({
                        url: makersAPI + "http://content.guardianapis.com/search?",
                        dataType: 'json',
                        success: function(data){
                            for (var i = 0; i < data.response.results.length; i++){
                                createFullArticle(data.response.results[i])
                                // createArticle(data.response.results[i])
                                // getThumbnail(data.response.results[i].apiUrl)
                            }
                        }
                    })
                }

                async function createFullArticle(apiResult){
                    url = apiResult.apiUrl
                    url = url.slice(0, 4) + url.slice(5);

                    $.ajax({
                        url: makersAPI + url + "?show-fields=thumbnail",
                        dataType: 'json',
                        success: function(data){
                            img = document.createElement('img')
                            img.setAttribute('src', data.response.content.fields.thumbnail)

                            div = document.createElement('div')
                            h2 = document.createElement('h2')
                            link = document.createElement('a')
                            link.setAttribute("href", apiResult.webUrl)
                            link.innerHTML = apiResult.webTitle
                            h2.appendChild(link)
                            div.appendChild(h2)
                            div.appendChild(img)
                            $(div).appendTo('body')
                        }
                    })
                }

                function createArticle(article){
                    div = document.createElement('div')
                    header = createHeader(article)
                    div.appendChild(header)
                    $(div).appendTo('body')
                }

                function createHeader(article){
                    h2 = document.createElement('h2')
                    link = document.createElement('a')
                    link.setAttribute("href", article.webUrl)
                    link.innerHTML = article.webTitle
                    h2.appendChild(link)
                    return h2
                }

                function createThumbnail(imgsrc){
                    img = document.createElement('img')
                    img.setAttribute('src', imgsrc)
                    $(img).appendTo('body')
                    return img
                }

                function getThumbnail(string){
                    $.ajax({
                        url: makersAPI + removeSFromHTTPS(string) + "?show-fields=thumbnail",
                        dataType: 'json',
                        success: function(data){
                            createThumbnail(data.response.content.fields.thumbnail)
                        }
                    })
                }

                function removeSFromHTTPS(string) {
                    return string.slice(0, 4) + string.slice(5);
                }

            });
        </script>
    </head>
    <body>

    </body>

</html>